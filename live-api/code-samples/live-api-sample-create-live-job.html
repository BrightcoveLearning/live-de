---
title: 'Live-API-Beispiel: Erstellen Sie einen Live-Job'
parent: Code Samples 
grandparent: Live API
---
 <h1>Diese Seite ist umgezogen - Sie werden weitergeleitet zum <a href="https://apis.support.brightcove.com/live-api/code-samples/live-api-sample-create-live-job.html">neuen Ort</a> in 3 Sekunden. Bitte aktualisiere deine Lesezeichen!</h1>
<script type="text/javascript">
var t = setTimeout (Funktion () { window.location.href = 'https://apis.support.brightcove.com/live-api/code-samples/live-api-sample-create-live-job.html'; }, 3000);
</script>
<article class="bcls-article">
  <h1>Live-API-Beispiel: Erstellen Sie einen Live-Job</h1>
  <summary>In diesem Beispiel erfahren Sie, wie Sie einen einfachen Live-Job erstellen.</summary>


<section class="bcls-section">
<h2 id="Introduction">Einführung</h2>

<p>In diesem Beispiel wird ein einfacher Live-Job mit drei Ausgabewiedergaben erstellt: 1080p, 720p und 480p.</p>

<p>Weil das <span translate="No">Live-API</span> nicht CORS-fähig ist und von einer serverseitigen App aus aufgerufen werden muss, wird die API-Anfrage über einen einfachen in PHP geschriebenen Proxy gesendet. Sie können dies in jeder serverseitigen Sprache reproduzieren. Sie müssen lediglich die vom JavaScript gesendeten Anforderungsparameter erfassen, die Anforderung an die API senden und die Antwort an das JavaScript zurückgeben. Den gesamten Code finden Sie in der <a href="#code">Codeabschnitt unten</a>.</p>
</section>

<section class="bcls-section">
<h2 id="create_live_job_app">Erstellen Sie eine Live-Job-App</h2>
Hier finden Sie den gesamten Code, der diesem Beispiel zugeordnet ist <a href="https://github.com/BrightcoveLearning/18519-live-api-sample-create-live-job">GitHub-Repository</a>.

<p data-height="1400" data-theme-id="dark" data-slug-hash="ZoYoVY" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="Live API Sample: Create a Live Job" class="codepen">Siehe den Stift <a href="https://codepen.io/team/rcrooks1969/pen/ZoYoVY/">Live-API-Beispiel: Erstellen Sie einen Live-Job</a> von Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969">@rcrooks1969</a>) auf <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script></section>

<section class="bcls-section">
<h2 id="Using_the_CodePen" class="bcls-expander-head">Verwenden des CodePen</h2>

<div class="bcls-expander-content">
<p>Hier sind einige Tipps, um den oben genannten CodePen effektiv zu nutzen:</p>

<ul>
	<li>Schalten Sie die tatsächliche Anzeige des Players um, indem Sie auf klicken <strong>Ergebnis</strong> Taste.</li>
	<li>Drücke den <strong>HTML / CSS / JS</strong> Schaltflächen zur Anzeige EINES der Codetypen.</li>
	<li>Klicken <strong>Auf CodePen bearbeiten</strong> in der oberen rechten Ecke, um diesen CodePen in Ihr eigenes Konto einzugeben.</li>
	<li>Hier finden Sie den gesamten Code, der diesem Beispiel zugeordnet ist <a href="https://github.com/BrightcoveLearning/18519-live-api-sample-create-live-job">GitHub-Repository</a>.</li>
</ul>
</div>
</section>

<section class="bcls-section">
<h2 id="code">Proxy-Code</h2>

<p>Zusätzlich zu dem in CodePen (und dem zugehörigen GitHub-Repo) gefundenen Code erfordert dieses Beispiel einen Proxy, um die API-Anforderung zu stellen und die Antwort an die App zurückzugeben. Für diese App haben wir PHP verwendet und der Code ist unten gezeigt. Sie können eine beliebige serverseitige Sprache verwenden, um den Proxy zu erstellen.</p>

<pre class="line-numbers">
<code class="language-php">&lt;? php /** * live-proxy.php - Proxy für Brightcove Live-APIs * stellt die Anfrage und gibt die Antwort zurück * Zugriff auf: * (beachten Sie sollten *immer* über HTTPS auf den Proxy zugreifen) * Methode: POST * * @post {string} url - die URL für die API-Anforderung * @post {string} [RequestType=Get] - HTTP-Methode für die Anfrage * @post {string} [RequestBody] - JSON-Daten, die mit Schreibanfragen gesendet werden sollen * @post {string} apikey - Live API-Schlüssel* * @returns {string} $response - JSON-Antwort erhielt von der API *///CORS-Aktivierung und anderen Header-Header-Header („Access-Control-Allow-Origin: *“); Header („Inhaltstyp: application/json“); Header („X-Content-Typ-Optionen: nosniff“); Header („X-XSS“); Header („X-Content-Typ-Optionen: nosniff“); Header („X-XSS“) -Protection“); $requestData = json_decode (file_get_contents ('php: //input'));//richte den API-Aufruf ein//erhalte den API-Schlüssel $apikey = $requestData-&gt;apikey;//Erhalte den Anforderungstyp oder den Standard auf GET if ($requestData-&gt;RequestType) { $method = $requestData-&gt;requestType; } sonst { $method = "GET"; }//mehr Sicherheitsprüfungen $needle = '.io'; $endapi = strpos ($requestData-&gt;URL, $needle) + 3; $nextChar = substr ($requestData-&gt;URL, $endapi, 1); wenn (strpos ($requestData-&gt;Url, 'api.bcovlive.io') == falsch) { exit('{"ERROR":"Only requests to Brightcove Live APIs are accepted by this proxy"}');} sonst wenn ($nextChar! == '/' &amp;&amp; $nextChar! == '? ') { exit('{"ERROR": "There was a problem with your API request - please check the URL"}');}//erhalte die URL und Autorisierungsinformationen aus den Formulardaten $request = $requestData-&gt;URL; //sende die HTTP-Anfrage wenn ($requestData-&gt;RequestBody) { $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "X-API-KEY: {$apikey}„,), CURLOPT_POSTFIELDS =&gt; $requestData-&gt;RequestBody)); $response = curl_exec ($ch); curl_close ($ch);} sonst { $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "X-API-KEY: {$apikey}„,))); $response = curl_exec ($ch); curl_close ($ch);}//Prüfe auf Fehler wenn ($antwort === FALSE) { $logEntry = "\nError:\n". "\n".date("Y-m-d H:i:s")." UTC \n" .$response; $logFileLocation = "log.txt"; $fileHandle = fopen($logFileLocation, 'a') or die("-1"); fwrite($fileHandle, $logEntry); fclose($fileHandle); echo '{"ERROR": "There was a problem with your API call"}'+ sterben (curl_error ($ch));}//decodieren Sie die Antwort//$responseData = json_decode ($ch);}//decodieren Sie die Antwort//$responseData = json_decode ($antwort)//gib den Antwort auf den AJAX-Anrufer $responseDecoded = json_decode ($response);//if (! isset ($responseDecoded)) { // $response = '{null}';//} echo $response;? &gt; </code></pre>
</section>

<script src="//learning-services-media.brightcove.com/doc-assets/node/18519-live-api-sample-create-live-job/create-job.js">

</script>

</article>