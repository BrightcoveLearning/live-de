---
title: Beschreibung der Live Catch-up API: In diesem Thema wird erläutert, wie Sie mithilfe der Live-Catch-up-API (TimeShift) einen Live-Job mit Catch-up erstellen.
parent: Guides 
grandparent: Live API
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Einführung</h2>
    <p>Die Live-Nachhol-API ist eine Ergänzung zur Live-API, die Wiederholungsfunktionen für den Start oder einen Teil eines Live-Streams bietet, damit späte Zuschauer "aufholen" können.</p>
    <p>Die Nachholfunktion wird einem Live-Job über einen neuen hinzugefügt <code translate="No">timeshift</code> Objektfeld, das beim Erstellen eines Live-Jobs verwendet wird. Die Details der <code translate="No">timeshift</code> Objektfelder werden in den folgenden Abschnitten detailliert beschrieben.</p>
  </section>
  <section class="bcls-section">
    <h2 id="timeshift_fields">TimeShift-Felder</h2>
    <p>Das <code translate="No">timeshift</code> Objekt ist ein Objekt der obersten Ebene im Anforderungshauptteil zum Erstellen einer Live-Jobanforderung. In der folgenden Tabelle sind die Felder für dieses Objekt aufgeführt.</p>
    <table class="bcls-table">
      <caption class="bcls-caption--table"><code translate="No">timeshift</code> Felder</caption>
      <thead class="bcls-table__head">
          <tr>
              <th>Feld</th>
              <th>Beschreibung</th>
          </tr>
      </thead>
      <tbody class="bcls-table__body">
          <tr>
              <td><code translate="No">startover_duration</code></td>
              <td>
                Größe des Startfensters in Sekunden bis zu 604800 (7 Tage).
                <p>Wenn <code translate="No">timeshift.startover_duration</code> Wird in der Anforderung angegeben, wird für jede Wiedergabeliste eine zeitverschobene Wiedergabe-URL erstellt. Diese URLs unterstützen die Live-Edge-Wiedergabe (mit einer DVR-Größe, wie in der Tabelle angegeben) <code translate="No">live_duration</code> Parameter).</p>
                <p>Sie unterstützen auch die Wiedergabe beliebiger Teile innerhalb des durch startover_duration definierten Zeitraums durch Anhängen von Parametern:</p>
                <ul style="padding: 0;margin-left: 1rem;">
                  <li><code translate="No">start=ts</code>- Unix-Epochenzeitstempel des Wiedergabestarts</li>
                  <li><code translate="No">end=ts</code>- Unix-Epochenzeitstempel des Wiedergabeendes</li>
                </ul>
              </td>
          </tr>
          <tr>
              <td><code translate="No">live_duration</code></td>
              <td>Größe des Live-Fensters in Sekunden bis zu 300. Der Standardwert ist 4 x Segmentdauer.</td>
          </tr>
          <tr>
              <td><code translate="No">live_delay</code></td>
              <td>Anzahl der Sekunden, um die Live-Ausgabe zu verzögern. Das Minimum und die Standardeinstellung sind 5 Sekunden.</td>
          </tr>
          <tr>
              <td><code translate="No">type</code></td>
              <td>
                <ul style="padding: 0;margin-left: 1rem;">
                  <li>single - für einen eigenständigen Zeitverschiebungsjob (Standard)</li>
                  <li>primär - für den primären Zeitschichtjob (muss ein sein <a href="/live-api/guides/live-api-static-entry-points.html">SEP Job</a>)</li>
                  <li>backup - für einen Backup-Zeitschichtjob</li>
                </ul>
              </td>
          </tr>
          <tr>
              <td><code translate="No">primary_job_id</code></td>
              <td>Verweist auf die primäre Zeitverschiebungsjob-ID (erforderlich, wenn der Typ eine Sicherung ist).</td>
          </tr>
          <tr>
              <td><code translate="No">skip_live_output</code></td>
              <td>Generieren Sie keine normalen Live- oder DVR-Wiedergabelisten (Standard ist false).</td>
          </tr>
      </tbody>
  </table>
  <h3>Anmerkungen</h3>
  <ul>
    <li>Beachten Sie, dass Timeshift-URLs nicht in der API-Antwort enthalten sind, wenn timeshift.type "backup" ist. Verwenden Sie die für den primären Job gemeldeten Timeshift-URLs.</li>
    <li>Wenn DRM für eine Zeitverschiebungsausgabe erforderlich ist, geben Sie a an <code translate="No">drm</code> Feld in der Jobanfrage wie gewohnt. Dieses Attribut muss nur für den primären Job angegeben werden, um die Zeitverschiebungsausgabe zu schützen. Es kann jedoch wünschenswert sein, skip_live_output für Sicherungsjobs auf true zu setzen, um eine ungeschützte Wiedergabe zu verhindern.</li>
    <li>Das Abschneiden ist auf die letzten 24 Stunden beschränkt und enthält wie die Live-Redundanz nur Eingaben vom ausgewählten Job</li>
  </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Sample_request_body">Stichprobe</h2>
    <h3>Text anfordern</h3>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "live_stream": true,
  "region": "us-west-2",
  "reconnect_time": 300,
  "ad_insertion": false,
  "static": false,
  <span class="bcls-highlight">"timeshift": {
    "startover_duration": 36000,
    "type": "single",
    "live_delay": 20,
    "skip_live_output": true
  },</span>
  "drm":{"modes":["fairplay","widevine:dash","playready"]},
  "outputs": [...]
}</code></pre>
    <details>
      <summary><h2>Beispielantwort (teilweise)</h2></summary>
<pre class="line-numbers"><code class="language-json" translate="No">{
  "id": "e948ae380893403eb33bb99ef48f96ca",
  "outputs": [
    {
      "id": "2-e948ae380893403eb33bb99ef48f96ca",
      "playlist_type": "defaultS3",
      "type": "playlist",
      "drm": {
        "token": "eyJhb...",
        "modes": [
            {
              "type": "fairplay",
              "key_system": "com.apple.fps.1_0",
              "license_url": "https://license-proxy-qa.alive.us-west-2.qa.deploys.brightcove.com/lic/fp?token=eyJhb…",
              "certificate_url": "https://license-proxy-qa.alive.us-west-2.qa.deploys.brightcove.com/cert/fp?token=eyJhb...",
              "filename": "playlist_fp.m3u8",
              "dvr_filename": "playlist_fp_dvr.m3u8",
              "playback_url": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist_fp.m3u8",
              "playback_url_dvr": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist_fp_dvr.m3u8",
              <span class="bcls-highlight">"timeshift_url": "https://timeshift.bcovlive-dev.com/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/8343f7014c0ea438/88575623f08e4befbc5892ed09b2042e/playlist_ts.m3u8",</span>
              "playback_added_cdns": []
            },
            {
              "type": "widevine",
              "key_system": "com.widevine.alpha",
              "license_url": "https://license-proxy-qa.alive.us-west-2.qa.deploys.brightcove.com/lic/wv?token=eyJhb...",
              "filename": "playlist.mpd",
              "dvr_filename": "playlist_dvr.mpd",
              "playback_url": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist.mpd",
              "playback_url_dvr": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist_dvr.mpd",
              <span class="bcls-highlight">"timeshift_url": "https://timeshift.bcovlive-dev.com/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/8343f7014c0ea438/324e208d72ef47f78e78f430d007a97e/playlist_ts.mpd",</span>
              "playback_added_cdns": []
            },
            {
              "type": "playready",
              "key_system": "com.microsoft.playready",
              "license_url": "https://license-proxy-qa.alive.us-west-2.qa.deploys.brightcove.com/lic/pr?token=eyJhb...",
              "filename": "playlist.mpd",
              "dvr_filename": "playlist_dvr.mpd",
              "playback_url": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist.mpd",
              "playback_url_dvr": "https://playback-qa.a-live.io/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/playlist_dvr.mpd",
              <span class="bcls-highlight">"timeshift_url": "https://timeshift.bcovlive-dev.com/e948ae380893403eb33bb99ef48f96ca/us-west-2/NA/8343f7014c0ea438/324e208d72ef47f78e78f430d007a97e/playlist_ts.mpd",</span>
              "playback_added_cdns": []
            }
          ],
          "token_expires_in": 43200,
          "require_playback_token": false
      }
    }
  ],
} </code></pre>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="Getting_job_info">Jobdetails abrufen</h2>
    <p>Ob Sie eine Liste von Jobs oder Details für einen bestimmten anfordern, <code translate="No">timeshift_url</code> wird für jede Wiedergabeliste in einem Timeshift-fähigen Job enthalten sein. Der Aufrufer kann dieser URL Parameter hinzufügen, um die Start- und Stoppzeiten als Unix Epoch-Zeitstempel anzugeben. Beispielsweise:</p>
<pre><code class="language-http" translate="No">https://bcovlive-a.akamaihd.net/8d64308aafe34d17adb98af69e9eac13/us-east-1/6021289116001/ts-cf98fa7b2ee4450e-5df3aae6cb724fe1a4a932b4964d3e17/playlist_ts.m3u8?start=1593457200&end=1593460800</code></pre>
    <p>Wenn die <code translate="No">start</code> und <code translate="No">end</code> Parameter sind nicht enthalten, die Wiedergabe erfolgt am Live-Rand.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Create_Playback_Token">Erstellen Sie ein Wiedergabetoken</h2>
    <p>Dem Wiedergabetoken wurden neue Felder hinzugefügt, damit Zeitverschiebungs-URLs von der API "Jobquellen abrufen" zurückgegeben werden können. Derzeit wird SSAI nicht für Jobs mit aktivierter Zeitverschiebung unterstützt <code translate="No">application_id</code> Attribut sollte nicht angegeben werden.</p>
    <p>Wenn <code translate="No">ts_start</code> und <code translate="No">ts_end</code> angegeben sind, werden sie der Wiedergabe-URL als Abfrageparameter hinzugefügt, wie im vorherigen Abschnitt beschrieben.</p>
    <h3>Neue Felder</h3>
    <table class="bcls-table">
      <caption class="bcls-caption--table">Neue Wiedergabetokenfelder</caption>
      <thead class="bcls-table__head">
          <tr>
              <th>Feld</th>
              <th>Beschreibung</th>
          </tr>
      </thead>
      <tbody class="bcls-table__body">
          <tr>
              <td><code translate="No">ts</code></td>
              <td>Wählen Sie die URL für die zeitversetzte Wiedergabe (true | false, optional, default ist false).</td>
          </tr>
          <tr>
              <td><code translate="No">ts_start</code></td>
              <td>Unix-Epochenzeitstempel für den Start des Startfensters (Nummer, optional)</td>
          </tr>
          <tr>
              <td><code translate="No">ts_end</code></td>
              <td>Unix-Epochenzeitstempel für das Ende des Startfensters (Nummer, optional)</td>
          </tr>
      </tbody>
  </table>
  </section>
</article>